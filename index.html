<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dynamic Island Music Player</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0b0f1a;
      --bg-soft: #0f1424;
      --text: #e8ecf1;
      --muted: #96a0b4;
      --accent: #7c5cff;
      --accent-2: #19d0ff;
      --card: #0f1424;
      --glow: 0 0 30px rgba(124, 92, 255, 0.35), 0 0 60px rgba(25, 208, 255, 0.25);
      --range-track: linear-gradient(90deg, var(--accent), var(--accent-2));
      --shadow-lg: 0 20px 60px rgba(0,0,0,.45);
      --pill: rgba(16, 21, 38, .85);
    }

    .light {
      --bg: #f5f7fb;
      --bg-soft: #ffffff;
      --text: #0f1424;
      --muted: #51607b;
      --accent: #6a5cff;
      --accent-2: #0fb6ff;
      --card: #ffffff;
      --glow: 0 0 22px rgba(106, 92, 255, 0.28), 0 0 50px rgba(15, 182, 255, 0.22);
      --pill: rgba(255, 255, 255, .8);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 70% -10%, rgba(124,92,255,.18), transparent 60%),
                  radial-gradient(900px 700px at -10% 90%, rgba(25,208,255,.18), transparent 55%),
                  linear-gradient(180deg, var(--bg), var(--bg-soft));
      display: grid;
      grid-template-columns: 320px 1fr;
      grid-template-rows: 100%;
      gap: 0;
      overflow: hidden;
    }

    /* Sidebar (Song List) */
    .sidebar {
      position: relative;
      padding: 22px 14px 24px 18px;
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.1));
      border-right: 1px solid rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
      overflow: auto;
    }

    .brand {
      display: flex; align-items: center; gap: 10px;
      font-weight: 700; letter-spacing: .5px; font-size: 18px;
    }
    .brand .dot { width: 12px; height: 12px; border-radius: 999px; background: linear-gradient(45deg, var(--accent), var(--accent-2)); box-shadow: var(--glow); }

    .search {
      margin: 14px 0 18px; position: relative;
    }
    .search input {
      width: 100%; padding: 12px 14px 12px 40px; border-radius: 14px; border: 1px solid rgba(255,255,255,.08);
      background: var(--card); color: var(--text); outline: none;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.02), var(--shadow-lg);
    }
    .search .icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); opacity: .6; }

    .list {
      display: grid; gap: 10px;
    }

    .track {
      display: grid; grid-template-columns: 56px 1fr auto; gap: 12px; align-items: center;
      padding: 10px; border-radius: 16px; cursor: pointer; position: relative; overflow: hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.06);
      transform: translateZ(0);
      transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease;
    }
    .track:hover { transform: translateY(-2px); box-shadow: 0 16px 40px rgba(0,0,0,.25), var(--glow); border-color: rgba(255,255,255,.12); }
    .track.active { box-shadow: 0 12px 30px rgba(0,0,0,.3), var(--glow); border-color: rgba(255,255,255,.18); }

    .track img { width: 56px; height: 56px; border-radius: 14px; object-fit: cover; }
    .track .meta { display: grid; gap: 4px; }
    .track .title { font-weight: 700; font-size: 14px; }
    .track .artist { font-size: 12px; color: var(--muted); }
    .track .duration { font-size: 12px; color: var(--muted); padding-right: 8px; }

    /* Top utilities */
    .topbar { position: fixed; right: 18px; top: 16px; z-index: 40; display: flex; gap: 10px; }
    .btn { border: 0; border-radius: 999px; padding: 10px 14px; background: var(--card); color: var(--text); cursor: pointer; font-weight: 700; box-shadow: var(--shadow-lg); display: inline-flex; align-items: center; gap: 8px; }
    .btn.small { padding: 8px 12px; }
    .btn-toggle { border: 1px solid rgba(255,255,255,.08); }

    /* Center stage (Dynamic Island Player) */
    .stage {
      position: relative;
      display: grid; place-items: center;
      overflow: hidden;
    }

    .island {
      position: relative;
      width: min(880px, 88vw);
      border-radius: 22px;
      padding: 28px 24px 22px;
      background: var(--pill);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow-lg), var(--glow);
      backdrop-filter: blur(16px) saturate(1.2);
    }

    .island-header { display: grid; grid-template-columns: 84px 1fr auto; align-items: center; gap: 18px; }
    .cover {
      width: 84px; height: 84px; border-radius: 18px; overflow: hidden; box-shadow: 0 8px 30px rgba(0,0,0,.34);
    }
    .cover img { width: 100%; height: 100%; object-fit: cover; display: block; }

    .titles { display: grid; gap: 6px; }
    .song-title { font-size: clamp(18px, 3.4vw, 26px); font-weight: 700; letter-spacing: .3px; }
    .song-artist { font-size: 13px; color: var(--muted); }

    .controls { display: flex; align-items: center; gap: 10px; }
    .iconbtn { width: 40px; height: 40px; border-radius: 999px; border: 0; background: var(--card); color: var(--text); display: grid; place-items: center; cursor: pointer; box-shadow: var(--shadow-lg); }
    .iconbtn.big { width: 58px; height: 58px; font-size: 18px; }

    .timeline { margin-top: 18px; display: grid; gap: 10px; }
    .timebar { display: grid; grid-template-columns: 42px 1fr 42px; align-items: center; gap: 10px; }
    .time { font-size: 12px; color: var(--muted); text-align: center; }

    input[type="range"] { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; background: rgba(255,255,255,.12); border-radius: 999px; outline: none; position: relative; overflow: hidden; }
    input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 18px; height: 18px; border-radius: 50%; background: #fff; box-shadow: -1000px 0 0 1000px var(--progress, transparent), 0 4px 12px rgba(0,0,0,.35); cursor: pointer; }
    input[type="range"]::-moz-range-thumb { width: 18px; height: 18px; border: 0; border-radius: 50%; background: #fff; box-shadow: 0 4px 12px rgba(0,0,0,.35); cursor: pointer; }
    input[type="range"]::-webkit-slider-runnable-track { height: 8px; background: transparent; }

    .volume { margin-top: 12px; display: flex; align-items: center; gap: 10px; }
    .volume .lvl { width: 36px; text-align: center; font-size: 12px; color: var(--muted); }

    /* Footer text */
    .footer { margin-top: 14px; font-size: 12px; color: var(--muted); text-align: center; }

    /* Responsive */
    @media (max-width: 920px) {
      body { grid-template-columns: 1fr; }
      .sidebar { display: none; }
      .topbar { right: 10px; top: 10px; }
      .island { width: min(720px, 94vw); }
    }
  </style>
</head>
<body>
  <!-- LEFT: Song List ("hoverboard"-style neon hover) -->
  <aside class="sidebar">
    <div class="brand"><span class="dot"></span> <span>Aftab's Playlist</span></div>
    <div class="search">
      <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 21L15.8 15.8M18 10.5C18 14.6421 14.6421 18 10.5 18C6.35786 18 3 14.6421 3 10.5C3 6.35786 6.35786 3 10.5 3C14.6421 3 18 6.35786 18 10.5Z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
      <input id="search" placeholder="Search songs... (title/artist)" />
    </div>
    <div class="list" id="songList"></div>
  </aside>

  <!-- TOP RIGHT: Theme toggle -->
  <div class="topbar">
    <button class="btn btn-toggle small" id="themeToggle" aria-label="Toggle theme">üåô/‚òÄÔ∏è</button>
  </div>

  <!-- CENTER: Dynamic Island Player -->
  <main class="stage">
    <section class="island" role="region" aria-label="Music player">
      <div class="island-header">
        <div class="cover"><img id="cover" alt="Album cover"></div>
        <div class="titles">
          <div class="song-title" id="title">‚Äî</div>
          <div class="song-artist" id="artist">‚Äî</div>
        </div>
        <div class="controls">
          <button class="iconbtn" id="prev" title="Previous">‚èÆ</button>
          <button class="iconbtn big" id="play" title="Play/Pause">‚ñ∂Ô∏è</button>
          <button class="iconbtn" id="next" title="Next">‚è≠</button>
        </div>
      </div>

      <div class="timeline">
        <div class="timebar">
          <div class="time" id="current">0:00</div>
          <input type="range" id="seek" min="0" max="1000" value="0" step="1" aria-label="Seek">
          <div class="time" id="duration">0:00</div>
        </div>
        <div class="volume">
          <button class="iconbtn" id="mute" title="Mute/Unmute">üîä</button>
          <input type="range" id="volume" min="0" max="100" value="80" />
          <div class="lvl" id="volLabel">80%</div>
        </div>
      </div>

      <div class="footer"><strong>Pro tip:</strong> Space = Play/Pause ‚Ä¢ ‚Üê / ‚Üí = Seek ‚Ä¢ ‚Üë / ‚Üì = Volume ‚Ä¢ M = Mute</div>

      <audio id="audio"></audio>
    </section>
  </main>

  <script>
    // ======= Demo playlist (replace URLs with your own files) =======
    const PLAYLIST = [
      {
        title: "Guzaara Baaghi 4",
        artist: "Josh Brar",
        // Fully inlined audio (no external file needed)
        src: "Guzaara Baaghi 4 128 Kbps.mp3",
        cover: "poster/images (1).jpg"
      },
      {
        title: "Millionaire Glory",
        artist: "Yo yo Honey Singh",
        src: "Millionaire Glory 128 Kbps.mp3",
        cover: "poster/GLORY-Hindi-2024-20250117161048-500x500.jpg"
      },
      {
        title: "Tere Bin",
        artist: "Atif Aslam",
        src: "Tere Bin Bas Ek Pal 128 Kbps.mp3",
        cover: "poster/Tere-Bin-Remix-By-Eric-Pillai-Bas-Ek-Pal-500-500.jpg"
      },
      {
        title: "Mere Rang Mein Rangne Wali",
        artist: "S. P. Balasubrahmanyam",
        src: "Mere Rang Mein Rangne Wali Maine Pyar Kiya 128 Kbps.mp3",
        cover: "poster/mere-rang-mein-rangne-wali-maine-pyar-kiya-500-500.jpg"
      },
      {
        title: "Bonita",
        artist: "Yo Yo Honey Singh, The Shams",
        src: "Bonita Glory 128 Kbps.mp3",
        cover: "poster/Bonita-Glory-500-500.jpg"
      },
      {
        title: "One Thousand Miles",
        artist: "Yo Yo Honey Singh",
        src: "ONE THOUSAND MILES(KoshalWorld.Com).mp3",
        cover: "poster/61151_4.jpg"
      },
      {
        title: "Malamaal ",
        artist: "Yo Yo Honey Singh",
        src: "Malamaal Glory 128 Kbps.mp3",
        cover: "poster/61151_4.jpg"
      },
      {
        title: "Payal",
        artist: "Yo Yo Honey Singh",
        src: "Payal Glory 128 Kbps.mp3",
        cover: "poster/61151_4.jpg"
      },
      {
        title: "No Cap",
        artist: "KR$NA",
        src: "No_Cap_Krsna.mp3",
        cover: "poster/thumb_64f5c7bcb8d1b.jpg"
      },
      {
        title: "Knock Knock",
        artist: "KR$NA",
        src: "Knock Knock Yours Truly 128 Kbps.mp3",
        cover: "poster/knock-knock-yours-truly-500-500.jpg"
      },
      {
        title: "Lo‚ÄëFi Breeze",
        artist: "Lakey Inspired",
        src: "https://file-examples.com/storage/fe0d1b1d2e2f3a5c1ef5f21/2017/11/file_example_MP3_2MG.mp3",
        cover: "https://images.unsplash.com/photo-1526948128573-703ee1aeb6fa?q=80&w=800&auto=format&fit=crop"
      },
      {
        title: "Lo‚ÄëFi Breeze",
        artist: "Lakey Inspired",
        src: "https://file-examples.com/storage/fe0d1b1d2e2f3a5c1ef5f21/2017/11/file_example_MP3_2MG.mp3",
        cover: "https://images.unsplash.com/photo-1526948128573-703ee1aeb6fa?q=80&w=800&auto=format&fit=crop"
      }
    ];

    // ======= Elements =======
    const $ = (sel) => document.querySelector(sel);
    const audio = $('#audio');
    const title = $('#title');
    const artist = $('#artist');
    const cover = $('#cover');
    const seek = $('#seek');
    const current = $('#current');
    const duration = $('#duration');
    const playBtn = $('#play');
    const prevBtn = $('#prev');
    const nextBtn = $('#next');
    const muteBtn = $('#mute');
    const vol = $('#volume');
    const volLabel = $('#volLabel');
    const songList = $('#songList');
    const searchInput = $('#search');
    const themeToggle = $('#themeToggle');

    let index = 0; // current track index
    let seeking = false; // avoid fight while scrubbing
    let theme = localStorage.getItem('bb-theme') || 'dark';
    if (theme === 'light') document.documentElement.classList.add('light');

    // ======= Build Song List =======
    function renderList(filter = '') {
      songList.innerHTML = '';
      const q = filter.trim().toLowerCase();
      PLAYLIST.forEach((t, i) => {
        if (q && !(t.title.toLowerCase().includes(q) || t.artist.toLowerCase().includes(q))) return;
        const el = document.createElement('div');
        el.className = 'track';
        el.dataset.index = i;
        el.innerHTML = `
          <img src="${t.cover}" alt="${t.title} cover">
          <div class="meta">
            <div class="title">${t.title}</div>
            <div class="artist">${t.artist}</div>
          </div>
          <div class="duration" id="d-${i}">--:--</div>
        `;
        el.addEventListener('click', () => load(i, true));
        songList.appendChild(el);

        // prefetch duration silently
        const probe = new Audio();
        probe.src = t.src;
        probe.addEventListener('loadedmetadata', () => {
          const d = formatTime(probe.duration || 0);
          const slot = document.getElementById(`d-${i}`);
          if (slot) slot.textContent = d;
        });
      });
      markActive();
    }

    // ======= Helpers =======
    function formatTime(s) {
      if (!isFinite(s)) return '0:00';
      const m = Math.floor(s / 60);
      const r = Math.floor(s % 60).toString().padStart(2, '0');
      return `${m}:${r}`;
    }

    function setProgress(el, percent) {
      const p = Math.max(0, Math.min(100, percent));
      el.style.setProperty('--progress', `linear-gradient(90deg, var(--accent) ${p}%, var(--accent-2) ${p}%)`);
    }

    function markActive() {
      [...document.querySelectorAll('.track')].forEach(t => t.classList.remove('active'));
      const active = document.querySelector(`.track[data-index="${index}"]`);
      if (active) active.classList.add('active');
    }

    // ======= Load & Control =======
    function load(i, autoplay = false) {
      index = (i + PLAYLIST.length) % PLAYLIST.length;
      const t = PLAYLIST[index];
      title.textContent = t.title; artist.textContent = t.artist; cover.src = t.cover; cover.alt = t.title + ' cover';
      audio.src = t.src; audio.load();
      if (autoplay) audio.play().catch(() => {});
      markActive();
    }

    function playPause() { audio.paused ? audio.play() : audio.pause(); }
    function prev() { load(index - 1, true); }
    function next() { load(index + 1, true); }

    // ======= Events =======
    playBtn.addEventListener('click', playPause);
    prevBtn.addEventListener('click', prev);
    nextBtn.addEventListener('click', next);

    audio.addEventListener('play', () => { playBtn.textContent = '‚è∏'; });
    audio.addEventListener('pause', () => { playBtn.textContent = '‚ñ∂Ô∏è'; });
    audio.addEventListener('ended', next);

    audio.addEventListener('loadedmetadata', () => {
      duration.textContent = formatTime(audio.duration);
      // Ensure progress track paints from 0
      seek.value = 0; setProgress(seek, 0);
    });

    audio.addEventListener('timeupdate', () => {
      if (seeking) return; // don't fight user while scrubbing
      const pct = (audio.currentTime / (audio.duration || 1)) * 1000; // seek uses 0..1000 for super smoothness
      seek.value = pct;
      setProgress(seek, pct / 10);
      current.textContent = formatTime(audio.currentTime);
    });

    // Smooth, high-resolution seek (0..1000)
    seek.addEventListener('input', (e) => {
      seeking = true;
      const pct = e.target.value / 1000; // 0..1
      setProgress(seek, pct * 100);
    });
    seek.addEventListener('change', (e) => {
      const pct = e.target.value / 1000;
      audio.currentTime = pct * (audio.duration || 0);
      seeking = false;
    });

    // Volume + mute
    function setVolume(v) {
      const clamped = Math.max(0, Math.min(1, v));
      audio.volume = clamped;
      vol.value = Math.round(clamped * 100);
      volLabel.textContent = `${Math.round(clamped * 100)}%`;
      muteBtn.textContent = (clamped === 0 || audio.muted) ? 'üîá' : 'üîä';
    }

    vol.addEventListener('input', (e) => setVolume(e.target.value / 100));
    muteBtn.addEventListener('click', () => { audio.muted = !audio.muted; setVolume(audio.muted ? 0 : (vol.value / 100)); });

    // Keyboard shortcuts
    window.addEventListener('keydown', (e) => {
      if (e.target.tagName === 'INPUT') return;
      if (e.code === 'Space') { e.preventDefault(); playPause(); }
      if (e.code === 'ArrowRight') { audio.currentTime = Math.min(audio.currentTime + 5, audio.duration || audio.currentTime); }
      if (e.code === 'ArrowLeft') { audio.currentTime = Math.max(audio.currentTime - 5, 0); }
      if (e.code === 'ArrowUp') { setVolume((audio.muted ? 0 : audio.volume) + 0.05); }
      if (e.code === 'ArrowDown') { setVolume((audio.muted ? 0 : audio.volume) - 0.05); }
      if (e.key.toLowerCase() === 'm') { audio.muted = !audio.muted; setVolume(audio.muted ? 0 : audio.volume); }
    });

    // Theme toggle
    themeToggle.addEventListener('click', () => {
      document.documentElement.classList.toggle('light');
      theme = document.documentElement.classList.contains('light') ? 'light' : 'dark';
      localStorage.setItem('bb-theme', theme);
    });

    // Search
    searchInput.addEventListener('input', (e) => renderList(e.target.value));

    // Init
    renderList();
    load(0, false);
    setVolume(0.8);
  </script>
</body>
</html>
